<head>
    <title>video-chat</title>
</head>

<body>
    {{#momentum plugin='fade'}}
    {{#if loggedIn}}
    {{>MeteorVideoChat}}
    {{else}}
    {{>LoginPage}}
    {{/if}}
    {{/momentum}}
</body>

<template name="LoginPage">
    <div class="container">
  <div class="row">
    <div class="Absolute-Center is-Responsive">
      <div id="logo-container"></div>
      <div class="col-sm-12 col-md-10 col-md-offset-1">
        <form id="loginForm">
          <div class="form-group input-group">
            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
            <input class="form-control" type="text"  placeholder="username">          
          </div>
          <div class="form-group">
            <button type="submit" class="btn btn-def btn-block">Login</button>
          </div>
        </form>        
      </div>  
    </div>    
  </div>
</div>
</template>

<template name="MeteorVideoChat">
    <div class="container" id="ChatContainer">
  <div class="row">
    <div class="Absolute-Center is-Responsive">
      <div id="logo-container"></div>
      <div class="col-sm-12 col-md-10 col-md-offset-1">
        {{#if hasUsers}}
        {{#each getUsers}}
        
        {{check this}}
         <div class="form-group">
            <button type="button" class="userIDLink btn btn-def btn-block">{{this.username}}</button>
          </div>
        {{/each}}{{else}}
        <p>No users available</p>
        {{/if}}
        <div class="form-group">
            <button type="button" class="action_logout btn btn-def btn-block btn-danger">Logout</button>
          </div>
      </div>  
    </div>    
  </div>
</div>
</template>

<template name="chatModal">
    <div class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">{{getStatus}}</h4>
                </div>

                <div class="modal-body">
                    <div style="text-align:center">
                        <video width="100%" id="videoChatAnswerVideo" poster="https://d13yacurqjgara.cloudfront.net/users/82092/screenshots/1073359/spinner.gif"></video>

                        <video style="width:250px" id="videoChatCallerVideo"></video>





                    </div>
                      {{#if incomingPhoneCall}}
                    <div class="text-center">
                        <h1>{{getCallerName}} is calling you!</h1>
                    </div>
                    {{/if}}
                </div>

                <div class="modal-footer">
                    {{#if incomingPhoneCall}}
                       <button type="button" id="answerCall" class="btn btn-success">Answer</button>
                    <button type="button" id="ignoreCall" class="btn btn-danger">Ignore</button>{{else}}
                    <button type="button" class="btn btn-danger" id="closeChat">End Call</button>{{/if}}
                </div>

            </div>
        </div>
    </div>
</template>

<template name="modal_loading">
    <div class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content" style="text-align:center">
            <i class="fa fa-cog fa-spin fa-3x fa-fw"></i>
            <span class="sr-only">Loading...</span>
            </div>
        </div>
    </div>
</template>